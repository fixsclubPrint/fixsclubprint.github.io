<div id="aadhaar-view" class="view hidden">
    <div class="box">
        <h3>Aadhaar Manual Print</h3>
        <input type="text" id="manual_aadhaar_no" placeholder="Aadhaar Number (12 Digits)">
        
        <textarea id="yadav_code_area" placeholder="Yadav: Yahan apna Aadhaar code daalein..." 
            style="width: 100%; height: 80px; padding: 10px; border-radius: 5px; border: 1px solid #ccc; margin-bottom: 15px;"></textarea>
        
        <div style="display: flex; gap: 10px;">
            <button class="btn" style="background: var(--success); flex: 1;" onclick="saveAndPrint('Auto')">Print Now</button>
            <button class="btn" style="background: #2c3e50; flex: 1;" onclick="saveAndPrint('Manual')">Manual (Yadav)</button>
        </div>
    </div>

    <div class="box">
        <h4>Recent History (Yadav Edit)</h4>
        <div id="history_list" style="max-height: 300px; overflow-y: auto;">
            <p style="color: #999; text-align: center;">Abhi koi history nahi hai.</p>
        </div>
        <button class="btn" style="background: #e74c3c; margin-top: 10px; font-size: 12px; padding: 5px;" onclick="clearAllHistory()">Clear All History</button>
    </div>
</div>

<script>
    // Page load hote hi history load karein
    window.onload = function() {
        displayHistory();
    };

    function saveAndPrint(type) {
        const aadhaarNo = document.getElementById('manual_aadhaar_no').value;
        const codeData = document.getElementById('yadav_code_area').value;
        
        if (!aadhaarNo || !codeData) {
            alert("Kripya dono fields bharein!");
            return;
        }

        const newEntry = {
            id: Date.now(),
            number: aadhaarNo,
            code: codeData,
            type: type,
            date: new Date().toLocaleString()
        };

        // LocalStorage mein save karein
        let history = JSON.parse(localStorage.getItem('aadhaar_history') || '[]');
        history.unshift(newEntry); // Naya wala sabse upar
        localStorage.setItem('aadhaar_history', JSON.stringify(history));

        displayHistory();
        alert("Data Save ho gaya aur " + type + " print start!");
    }

    function displayHistory() {
        const historyList = document.getElementById('history_list');
        const history = JSON.parse(localStorage.getItem('aadhaar_history') || '[]');

        if (history.length === 0) {
            historyList.innerHTML = '<p style="color: #999; text-align: center;">Abhi koi history nahi hai.</p>';
            return;
        }

        historyList.innerHTML = history.map(item => `
            <div style="border-bottom: 1px solid #eee; padding: 10px 0; display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <strong style="color: #2c3e50;">${item.number}</strong> <small>(${item.type})</small><br>
                    <small style="color: #666;">Data: ${item.code.substring(0, 20)}... | ${item.date}</small>
                </div>
                <button onclick="deleteEntry(${item.id})" style="background: #ff7675; border: none; color: white; padding: 5px 10px; border-radius: 4px; cursor: pointer;">Delete</button>
            </div>
        `).join('');
    }

    function deleteEntry(id) {
        if(confirm("Kya aap ise remove karna chahte hain?")) {
            let history = JSON.parse(localStorage.getItem('aadhaar_history') || '[]');
            history = history.filter(item => item.id !== id);
            localStorage.setItem('aadhaar_history', JSON.stringify(history));
            displayHistory();
        }
    }

    function clearAllHistory() {
        if(confirm("Sari history delete ho jayegi. Kya aap sure hain?")) {
            localStorage.removeItem('aadhaar_history');
            displayHistory();
        }
    }
</script>
