<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>Original PVC Voter - Final Layout</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #cbd5e0; padding: 20px; }
        .form-container { background: #fff; max-width: 900px; margin: 0 auto; padding: 20px; border-radius: 10px; border: 2px solid #1a237e; }
        .row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 12px; }
        .form-group { display: flex; flex-direction: column; }
        label { font-size: 11px; font-weight: bold; margin-bottom: 5px; color: #1a237e; }
        input { padding: 8px; border: 1px solid #ccc; border-radius: 5px; outline: none; }

        #print-area { display: none; margin-top: 30px; flex-direction: column; align-items: center; }
        
        /* CARD DESIGN */
        .voter-box { 
            width: 325px; height: 205px; background: #fff; border: 0.8px solid #000; 
            position: relative; overflow: hidden;
            background-image: linear-gradient(135deg, rgba(255,165,0,0.08) 0%, rgba(255,255,255,1) 50%, rgba(0,191,255,0.08) 100%);
        }

        /* Bharat Naksha Positioned near QR Corner */
        .voter-box .map-watermark {
            position: absolute; bottom: 15px; left: 10px; width: 150px; height: 170px;
            background: url('https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/India_map_transparent.png/600px-India_map_transparent.png');
            background-size: contain; background-repeat: no-repeat; opacity: 0.07;
            z-index: 1;
        }

        .v-header { display: flex; align-items: center; border-bottom: 1.5px solid #000; padding: 4px 10px; background: #fff; position: relative; z-index: 10; }
        .v-header img { height: 26px; }
        .v-header-text { text-align: center; flex-grow: 1; line-height: 1.1; }
        .v-header-text div { font-size: 10px; font-weight: 900; }

        /* FRONT ELEMENTS */
        .epic-front-main { position: absolute; top: 48px; left: 12px; font-size: 11px; font-weight: 900; z-index: 10; }
        .main-photo { position: absolute; left: 12px; top: 68px; width: 72px; height: 92px; border: 0.5px solid #000; z-index: 10; background: #fff; }
        .ghost-photo { position: absolute; right: 20px; top: 62px; width: 35px; height: 45px; opacity: 0.5; filter: grayscale(100%); z-index: 10; }
        .vertical-epic { position: absolute; right: 8px; top: 62px; font-size: 6px; writing-mode: vertical-rl; font-weight: 900; height: 45px; z-index: 10; }
        .v-details { position: absolute; left: 95px; top: 68px; font-size: 9px; line-height: 1.3; font-weight: 600; z-index: 10; }
        .v-footer-text { position: absolute; bottom: 0; width: 100%; height: 18px; border-top: 1px solid #000; text-align: center; font-size: 8px; font-weight: 900; line-height: 18px; background: #fff; z-index: 10; }

        /* BACK SIDE LAYOUT */
        .v-back-addr { padding: 8px 12px; font-size: 8px; line-height: 1.25; font-weight: 600; text-align: left; margin-left: 105px; z-index: 10; position: relative; }
        
        .qr-section { position: absolute; left: 12px; top: 45px; text-align: center; z-index: 10; }
        .sig-img { height: 22px; width: 60px; object-fit: contain; margin-bottom: 2px; }
        .qr-area { width: 85px; height: 85px; background: #fff; border: 0.5px solid #ddd; }
        
        .epic-back-bottom { position: absolute; left: 15px; top: 165px; font-size: 11px; font-weight: 900; z-index: 10; }
        
        /* Assembly and Date Shifted UP */
        .officer-box { position: absolute; right: 15px; top: 125px; text-align: center; width: 160px; z-index: 10; }
        .officer-box b { font-size: 8.5px; display: block; font-weight: 900; line-height: 1.2; }
        .officer-box span { font-size: 8px; font-weight: 700; display: block; }
        
        /* Download Date One Line - No Border */
        .dl-text-big { font-size: 8px; font-weight: 900; display: block; margin-top: 5px; text-align: center; }

        .v-footer-back { 
            position: absolute; bottom: 0; width: 100%; height: 20px; 
            border-top: 1.8px solid #b22222; background: #fff; 
            display: flex; align-items: center; justify-content: space-between; 
            padding: 0 10px; font-size: 9px; font-weight: 900; z-index: 10;
        }

        .btn-gen { background: #1a237e; color: #fff; border: none; padding: 15px; border-radius: 5px; width: 100%; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<div class="form-container">
    <h3 style="text-align: center; color: #1a237e;">Final Original PVC Voter Design</h3>
    <form id="vForm">
        <div class="row">
            <div class="form-group"><label>EPIC No.</label><input type="text" id="epic" maxlength="12"></div>
            <div class="form-group"><label>Name (English)</label><input type="text" id="n_en"></div>
            <div class="form-group"><label>Name (Hindi)</label><input type="text" id="n_hi"></div>
        </div>
        <div class="row">
            <div class="form-group"><label>Father (English)</label><input type="text" id="fh_en"></div>
            <div class="form-group"><label>Father (Hindi)</label><input type="text" id="fh_hi"></div>
            <div class="form-group"><label>DOB (DDMMYYYY)</label><input type="text" id="dob" maxlength="10"></div>
        </div>
        <div class="row">
            <div class="form-group"><label>Gender</label><input type="text" id="gen_txt" value="Female / महिला"></div>
            <div class="form-group"><label>Assembly (e.g. 192-Sandesh)</label><input type="text" id="ac_mix"></div>
            <div class="form-group"><label>Photo</label><input type="file" onchange="preview(this)"></div>
        </div>
        <div class="row"><div class="form-group" style="grid-column: span 3;"><label>Address (Hindi)</label><input type="text" id="addr_hi"></div></div>
        <div class="row"><div class="form-group" style="grid-column: span 3;"><label>Address (English)</label><input type="text" id="addr_en"></div></div>
        <button type="button" class="btn-gen" onclick="generate()">Generate Voter Card</button>
    </form>
</div>

<div id="print-area">
    <div id="capture" style="display: flex; gap: 20px; background: #fff; padding: 15px;">
        <div class="voter-box">
            <div class="map-watermark"></div>
            <div class="v-header">
                <img src="https://upload.wikimedia.org/wikipedia/commons/e/e1/State_Emblem_of_India.svg">
                <div class="v-header-text"><div>भारत निर्वाचन आयोग</div><div>ELECTION COMMISSION OF INDIA</div></div>
                <img src="https://upload.wikimedia.org/wikipedia/commons/0/03/Election_Commission_of_India_logo.png">
            </div>
            <div class="epic-front-main" id="df_epic_1"></div>
            <img id="df_p_main" class="main-photo">
            <img id="df_p_ghost" class="ghost-photo">
            <div class="vertical-epic" id="df_epic_vertical"></div>
            <div class="v-details">
                नाम : <b id="df_n_hi"></b><br>Name : <b id="df_n_en"></b><br>
                पिता का नाम : <span id="df_fh_hi"></span><br>Father Name : <span id="df_fh_en"></span><br>
                सेक्स / Gender : / <span id="df_gen"></span><br>
                जन्मतिथि/आयु : <br>Date of Birth / Age : <span id="df_dob"></span>
            </div>
            <div class="v-footer-text">e-Electors Photo Identity Card - ई - मतदाता पहचान पत्र</div>
        </div>

        <div class="voter-box">
            <div class="map-watermark"></div>
            <div class="v-back-addr">
                <b>पता : </b> <span id="db_addr_hi"></span><br>
                <b>Address: </b> <span id="db_addr_en"></span>
            </div>
            
            <div class="qr-section">
                <img src="https://upload.wikimedia.org/wikipedia/commons/a/af/Signature_of_H._V._Kamath.svg" class="sig-img">
                <div id="qrcode" class="qr-area"></div>
            </div>

            <div class="epic-back-bottom" id="db_epic_back"></div>
            
            <div class="officer-box">
                <b id="db_ero_hi"></b>
                <span id="db_ero_en"></span>
                <span class="dl-text-big">Download Date -: <span id="db_dl"></span></span>
            </div>
            
            <div class="v-footer-back">
                <span>1950</span>
                <span>https://voters.eci.gov.in</span>
            </div>
        </div>
    </div>
    <button class="btn-gen" style="background:#2e7d32; margin-top:20px;" onclick="download()">Download Image</button>
</div>

<script>
    document.getElementById('dob').addEventListener('input', function (e) {
        let v = e.target.value.replace(/\D/g, '').slice(0, 8);
        if (v.length >= 5) v = v.slice(0, 2) + '/' + v.slice(2, 4) + '/' + v.slice(4);
        else if (v.length >= 3) v = v.slice(0, 2) + '/' + v.slice(2);
        e.target.value = v;
    });

    function preview(input) {
        if (input.files && input.files[0]) {
            var r = new FileReader();
            r.onload = function(e) { 
                document.getElementById('df_p_main').src = e.target.result; 
                document.getElementById('df_p_ghost').src = e.target.result; 
            };
            r.readAsDataURL(input.files[0]);
        }
    }

    function generate() {
        let ep = document.getElementById('epic').value.toUpperCase();
        let dt = new Date().toLocaleDateString('en-GB').replace(/\//g, '-');

        document.getElementById('df_epic_1').innerText = ep;
        document.getElementById('df_epic_vertical').innerText = ep;
        document.getElementById('db_epic_back').innerText = ep;
        document.getElementById('df_n_hi').innerText = document.getElementById('n_hi').value;
        document.getElementById('df_n_en').innerText = document.getElementById('n_en').value.toUpperCase();
        document.getElementById('df_fh_hi').innerText = document.getElementById('fh_hi').value;
        document.getElementById('df_fh_en').innerText = document.getElementById('fh_en').value.toUpperCase();
        document.getElementById('df_dob').innerText = document.getElementById('dob').value;
        document.getElementById('df_gen').innerText = document.getElementById('gen_txt').value;
        document.getElementById('db_addr_hi').innerText = document.getElementById('addr_hi').value;
        document.getElementById('db_addr_en').innerText = document.getElementById('addr_en').value;
        document.getElementById('db_dl').innerText = dt;
        
        let ac = document.getElementById('ac_mix').value;
        document.getElementById('db_ero_hi').innerText = "निर्वाचक निबंधन पदाधिकारी, " + ac;
        document.getElementById('db_ero_en').innerText = "Electoral Registration Officer, " + ac;

        document.getElementById('qrcode').innerHTML = "";
        new QRCode(document.getElementById("qrcode"), { text: ep, width: 85, height: 85 });
        document.getElementById('print-area').style.display = 'flex';
    }

    function download() {
        html2canvas(document.getElementById('capture'), { scale: 4 }).then(canvas => {
            let a = document.createElement('a');
            a.download = 'Voter_ID_Card.png';
            a.href = canvas.toDataURL();
            a.click();
        });
    }
</script>
</body>
</html>
