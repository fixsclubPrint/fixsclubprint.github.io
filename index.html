<div id="manualPortal" class="box" style="max-width: 950px; text-align: left; margin: 20px auto;">
    <button onclick="goBackToDash()" style="background:#666; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer; margin-bottom:15px;">⬅️ Back to Dashboard</button>
    
    <h2 style="text-align:center; color:#1a237e;">All-India Multi-Language Print</h2>

    <div style="background:#e3f2fd; padding:15px; border-radius:10px; margin-bottom:20px;">
        <label><b>Bhasha Chunein (Select Language):</b></label>
        <select id="targetLang" style="width:100%; padding:12px; margin-top:8px; border:2px solid #1a237e;">
            <option value="hi">Hindi (हिंदी)</option>
            <option value="mr">Marathi (मराठी)</option>
            <option value="pa">Punjabi (ਪੰਜਾਬੀ)</option>
            <option value="ta">Tamil (தமிழ்)</option>
            <option value="te">Telugu (తెలుగు)</option>
            <option value="bn">Bengali (বাংলা)</option>
            <option value="gu">Gujarati (ગુજરાતી)</option>
            <option value="kn">Kannada (ಕನ್ನಡ)</option>
            <option value="ml">Malayalam (മലയാളം)</option>
            <option value="or">Odia (ଓଡ଼ିଆ)</option>
        </select>
    </div>

    <div style="display: flex; gap: 20px; flex-wrap: wrap;">
        <div style="flex: 1; min-width: 300px;">
            <label>Full Name (English):</label>
            <input type="text" id="en_name" onkeyup="runTranslation('en_name', 'local_name')" placeholder="Type Name in English">
            
            <label>Naam (Auto Translation - Editable):</label>
            <input type="text" id="local_name" onkeyup="updatePreview()" placeholder="Yahan auto-naam aayega">

            <label>Father's Name (English):</label>
            <input type="text" id="en_father" onkeyup="runTranslation('en_father', 'local_father')" placeholder="Type Father Name">
            
            <input type="text" id="local_father" onkeyup="updatePreview()" placeholder="Pita ka naam (Auto)">

            <label>Address (English):</label>
            <textarea id="en_addr" onkeyup="runTranslation('en_addr', 'local_addr')" placeholder="Full Address in English"></textarea>
            
            <textarea id="local_addr" onkeyup="updatePreview()" placeholder="Pata (Auto Translation)"></textarea>
            
            <button class="btn" style="background:#d32f2f; margin-top:10px;" onclick="generateQR()">Update Card & QR</button>
        </div>

        <div id="printArea" style="flex: 1; border: 2px solid #333; padding: 15px; background: white; min-height: 250px; position: relative;">
            <div style="text-align:center; font-weight:bold; border-bottom:1px solid #000; padding-bottom:5px;">भारत सरकार / GOVT OF INDIA</div>
            <p><b>Name:</b> <span id="p_local_name">---</span> / <span id="p_en_name">---</span></p>
            <p><b>Father:</b> <span id="p_local_father">---</span> / <span id="p_en_father">---</span></p>
            <p><b>Address:</b> <span id="p_local_addr">---</span> <br> <span id="p_en_addr">---</span></p>
            <div id="card_qr" style="position:absolute; bottom:10px; right:10px;"></div>
        </div>
    </div>
</div>

<script>
    // Translation chalu karne wala function
    function runTranslation(srcId, targetId) {
        const text = document.getElementById(srcId).value;
        const lang = document.getElementById('targetLang').value;
        
        if (text.length < 2) return;

        // Google API URL
        const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=${lang}&dt=t&q=${encodeURI(text)}`;

        fetch(url)
            .then(res => res.json())
            .then(data => {
                if(data && data[0] && data[0][0]) {
                    document.getElementById(targetId).value = data[0][0][0];
                    updatePreview(); // Preview update karein
                }
            })
            .catch(err => console.error("Translation Error: ", err));
    }

    function updatePreview() {
        document.getElementById('p_en_name').innerText = document.getElementById('en_name').value;
        document.getElementById('p_local_name').innerText = document.getElementById('local_name').value;
        document.getElementById('p_en_father').innerText = document.getElementById('en_father').value;
        document.getElementById('p_local_father').innerText = document.getElementById('local_father').value;
        document.getElementById('p_en_addr').innerText = document.getElementById('en_addr').value;
        document.getElementById('p_local_addr').innerText = document.getElementById('local_addr').value;
    }

    function generateQR() {
        document.getElementById('card_qr').innerHTML = "";
        new QRCode(document.getElementById("card_qr"), {
            text: document.getElementById('en_name').value || "fixsclubPrint",
            width: 60, height: 60
        });
    }
</script>
