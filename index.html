// 1. Is function ko badal dein taaki bhasha chunte hi sab fill ho jaye
async function translateFields() {
    let lang = document.getElementById('lang_select').value; 
    
    // Agar bhasha select nahi hai, toh automatic fill nahi hoga
    if(!lang) {
        console.log("Kripya bhasha chune");
        return;
    }

    // Name translate karein
    let nameVal = document.getElementById('name_en').value;
    if(nameVal) translateText(nameVal, 'name_hi', lang);

    // Address translate karein
    let addrVal = document.getElementById('addr_en').value;
    if(addrVal) translateText(addrVal, 'addr_hi', lang);

    // Gender local update karein
    let genEn = document.getElementById('gender').value;
    if(lang === 'hi') {
        document.getElementById('gender_hi').value = (genEn === "MALE") ? "पुरुष" : "महिला";
    } else {
        translateText(genEn, 'gender_hi', lang);
    }
}

// 2. Translate function ko thoda fast banaya gaya hai
async function translateText(text, targetId, lang) {
    if(!text.trim()) return;
    try {
        const res = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=${lang}&dt=t&q=${encodeURI(text)}`);
        const data = await res.json(); 
        if(data && data[0] && data[0][0]) {
            document.getElementById(targetId).value = data[0][0][0];
        }
    } catch (e) { 
        console.error("Translation error: Internet check karein."); 
    }
}
